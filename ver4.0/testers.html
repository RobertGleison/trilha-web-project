<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Progressive Squares</title>
  <style>
    /* Main layout */
    body {
      font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
      text-align: center;
      background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("./bck_page.jpg");
      background-size: cover;
    }

    header h1 {
      font-size: 70px;
      color: black;
      text-shadow: 2px 2px 0 rgb(249, 249, 248), -2px 2px 0 rgb(249, 249, 248),
                   2px -2px 0 rgb(249, 249, 248), -2px -2px 0 rgb(249, 249, 248);
    }

    /* Grid layout for the container */
    #container {
      display: grid;
      grid-template-columns: auto 800px auto; /* Left pieces, board, right pieces */
      gap: 10px;
      align-items: center;
      justify-content: center;
      width: 100%;
      margin-top: 20px;
    }

    /* Styling for the piece containers */
    .piece-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
    }

    /* Styling for the board area */
    #board {
      position: relative;
      width: 800px;
      height: 800px;
      background: linear-gradient(rgba(112, 111, 111, 0.6), rgba(112, 111, 111, 0.6)), url("./bck_board.png");
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Styling for each square */
    .square {
      position: absolute;
      border: 3px solid rgb(0, 0, 0);
      display: flex;
      justify-content: center;
      align-items: center;
      pointer-events: none;
    }

    /* Styling for each button */
    .button {
      position: absolute;
      width: 25px;
      height: 25px;
      background-color: #000000c1;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transform: translate(-50%, -50%);
      pointer-events: auto;
    }

    /* Smaller piece styling */
    .piece {
      width: 40px;
      height: 40px;
      margin: 0;
    }
  </style>
</head>
<body>
  <header>
    <h1>Nine Man Morris</h1>    
  </header>
  
  <!-- Game Wrapper with Pieces and Board -->
  <div id="container">
    <!-- Red player pieces on the left side -->
    <div class="piece-container" id="red-pieces"></div>
    
    <!-- Board in the center -->
    <div id="board"></div>
    
    <!-- Black player pieces on the right side -->
    <div class="piece-container" id="black-pieces"></div>
  </div>

  <script>
    function createSquares(n) {
      const board = document.getElementById('board');
      const initialSize = 125;
      const sizeIncrement = 125;
      var game_list = [];
      
      for (let i = 0; i < n; i++) {
        const size = initialSize + i * sizeIncrement;
        const square = document.createElement('div');
        square.classList.add('square');
        square.style.width = `${size}px`;
        square.style.height = `${size}px`;
        square.style.left = `calc(50% - ${size / 2}px)`;
        square.style.top = `calc(50% - ${size / 2}px)`;

        // Function to create button centered at (x, y) relative to the square
        function createButton(i, x , y) {
          const button = document.createElement('div');
          button.id = i.toString().concat(x.toString().concat(y.toString()));
          button.classList.add('button');
          button.style.left = `${x}px`;
          button.style.top = `${y}px`;
          square.appendChild(button);
          button.addEventListener('click', selectTile);
        }

        // Place buttons centered on edges and vertices of the square
        const halfSize = size / 2;
        createButton(i, 0, 0);                // Top-left corner
        createButton(i, size, 0);              // Top-right corner
        createButton(i, 0, size);              // Bottom-left corner
        createButton(i, size, size);           // Bottom-right corner
        createButton(i, halfSize, 0);          // Top-center
        createButton(i, halfSize, size);       // Bottom-center
        createButton(i, 0, halfSize);          // Left-center
        createButton(i, size, halfSize);       // Right-center

        board.appendChild(square);
        game_list.push(['empty','empty','empty','empty','empty','empty','empty','empty']);
      }
    }

    function setupPieces(playerId, pieceImage, count) {
      const container = document.getElementById(playerId);
      for (let i = 0; i < count; i++) {
        const piece = document.createElement("img");
        piece.src = pieceImage;
        piece.classList.add("piece");
        container.appendChild(piece);
      }
    }

    function selectTile() {
      console.log(this.id);
    }

    // Run the function with a specified number of squares
    const n = 4;
    createSquares(n);
    const numPieces = 3 * n;
    setupPieces("red-pieces", "red_checker.png", numPieces);
    setupPieces("black-pieces", "black_checker.png", numPieces);
  </script>
</body>
</html>
